package com.roomy.roomy.model;

import jakarta.persistence.*;
import org.springframework.lang.NonNull;
import org.springframework.validation.annotation.Validated;

import java.util.Date;
import java.util.UUID;

@Validated
@Entity
public class Post {
    @Id
    @GeneratedValue(strategy = GenerationType.UUID)
    private UUID postId;// need to be autogenerated

    @ManyToOne
    @JoinColumn(name="userId",referencedColumnName = "userId")
    private User user;

    @Column(columnDefinition = "LONGTEXT")
    private String postBody;
    private String gender;

    @OneToOne(cascade = {CascadeType.ALL})
    @JoinColumn(name="addressId", referencedColumnName ="addressId")
    private Address address;
    private Date date = new Date();
    private int rent;
    private int noOfRoommates;
    private int noOfFilledRoommates = 1;
    private String size;
    public Post() {

    }
    public Post(String address1, String address2, String city, String state, String country,String postBody, String pincode, String gender, int noOfRoommates, String size) {
        this.address = new Address(address1, address2, city, state, country, pincode);
        this.postBody = postBody;
        this.gender = gender;
        this.noOfRoommates = noOfRoommates;
        this.size = size;
    }

    public Post(PostRequest postRequest)
    {
        this.address = new Address(postRequest.getAddress1(), postRequest.getAddress2(),
                postRequest.getCity(), postRequest.getState(), postRequest.getCountry(), postRequest.getPincode());
        this.date = new Date();
        this.postBody = postRequest.getPostBody();
        this.noOfRoommates = postRequest.getnoOfRoommates();
        this.noOfFilledRoommates = postRequest.getNoOfFilledRoommates();
        this.gender = postRequest.getGender();
        this.rent = postRequest.getRent();
        this.size = postRequest.getSize();
    }

    public String getSize() {
        return size;
    }

    public void setSize(String size) {
        this.size = size;
    }

    public UUID getPostId() {
        return postId;
    }

    public void setPostId(UUID postId) {
        this.postId = postId;
    }


    public String getPostBody() {
        return postBody;
    }


    public void setPostBody(String postBody) {
        this.postBody = postBody;
    }


    public String getGender() {
        return gender;
    }


    public void setGender(String gender) {
        this.gender = gender;
    }


    public Address getAddress() {
        return address;
    }


    public void setAddress(Address address) {
        this.address = address;
    }


    public Date getDate() {
        return date;
    }


    public void setDate(Date date) {
        this.date = date;
    }

    public int getRent() {
        return rent;
    }

    public void setRent(int rent) {
        this.rent = rent;
    }


    public int getnoOfRoommates() {
        return noOfRoommates;
    }


    public void setnoOfRoommates(int noOfRoommates) {
        this.noOfRoommates = noOfRoommates;
    }


    public int getNoOfFilledRoommates() {
        return noOfFilledRoommates;
    }


    public void setNoOfFilledRoommates(int noOfFilledRoommates) {
        this.noOfFilledRoommates = noOfFilledRoommates;
    }

    public User getUser() {
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    }


    public String toString() {
        return "Post{" +
                "postId=" + postId +
                ", user=" + user +
                ", postBody='" + postBody + '\'' +
                ", gender='" + gender + '\'' +
                ", address=" + address +
                ", date=" + date +
                ", rent=" + rent +
                ", noOfRoommates=" + noOfRoommates +
                ", noOfFilledRoommates=" + noOfFilledRoommates +
                '}';
    }
}
